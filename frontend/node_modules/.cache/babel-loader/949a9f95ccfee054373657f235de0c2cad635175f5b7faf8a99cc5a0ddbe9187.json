{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Table,Badge,Spinner,Alert}from'react-bootstrap';import{useAuth}from'../context/AuthContext';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderHistory=()=>{const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const{user}=useAuth();const navigate=useNavigate();useEffect(()=>{if(!user){navigate('/login');return;}fetchOrders();},[user,navigate]);const fetchOrders=async()=>{try{setLoading(true);const response=await axios.get(\"/api/orders/user/\".concat(user.id));setOrders(response.data);setError('');}catch(error){console.error('Error fetching orders:',error);setError('Failed to load orders');}finally{setLoading(false);}};const getStatusVariant=status=>{switch(status){case'PENDING':return'warning';case'CONFIRMED':return'info';case'SHIPPED':return'primary';case'DELIVERED':return'success';case'CANCELLED':return'danger';default:return'secondary';}};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};if(loading){return/*#__PURE__*/_jsx(Container,{className:\"text-center my-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(error){return/*#__PURE__*/_jsx(Container,{className:\"my-5\",children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error})});}return/*#__PURE__*/_jsxs(Container,{className:\"my-4\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Order History\"})})}),orders.length===0?/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"No orders found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You haven't placed any orders yet.\"})]})}):/*#__PURE__*/_jsx(Row,{children:orders.map(order=>/*#__PURE__*/_jsx(Col,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[\"Order #\",order.id]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Placed on \",formatDate(order.orderDate)]})]}),/*#__PURE__*/_jsxs(Col,{md:6,className:\"text-md-end\",children:[/*#__PURE__*/_jsx(Badge,{bg:getStatusVariant(order.status),className:\"me-2\",children:order.status}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",order.totalAmount]})]})]})}),/*#__PURE__*/_jsxs(Card.Body,{children:[order.orderItems&&order.orderItems.length>0?/*#__PURE__*/_jsxs(Table,{responsive:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:order.orderItems.map(item=>{var _item$product;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:((_item$product=item.product)===null||_item$product===void 0?void 0:_item$product.name)||'Product'}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(item.price*item.quantity).toFixed(2)]})]},item.id);})})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Order items not available\"}),order.shippingAddress&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping Address:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:order.shippingAddress})]}),order.paymentMethod&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Payment Method:\"}),\" \",order.paymentMethod]})]})]})},order.id))})]});};export default OrderHistory;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Table","Badge","Spinner","Alert","useAuth","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","OrderHistory","orders","setOrders","loading","setLoading","error","setError","user","navigate","fetchOrders","response","get","concat","id","data","console","getStatusVariant","status","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","className","children","animation","role","variant","length","map","order","Header","md","orderDate","bg","totalAmount","Body","orderItems","responsive","size","item","_item$product","product","name","price","quantity","toFixed","shippingAddress","paymentMethod"],"sources":["E:/sinx/QuickKart1/frontend/src/components/OrderHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Card, Table, Badge, Spinner, Alert } from 'react-bootstrap';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst OrderHistory = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    fetchOrders();\r\n  }, [user, navigate]);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`/api/orders/user/${user.id}`);\r\n      setOrders(response.data);\r\n      setError('');\r\n    } catch (error) {\r\n      console.error('Error fetching orders:', error);\r\n      setError('Failed to load orders');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusVariant = (status) => {\r\n    switch (status) {\r\n      case 'PENDING': return 'warning';\r\n      case 'CONFIRMED': return 'info';\r\n      case 'SHIPPED': return 'primary';\r\n      case 'DELIVERED': return 'success';\r\n      case 'CANCELLED': return 'danger';\r\n      default: return 'secondary';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className=\"text-center my-5\">\r\n        <Spinner animation=\"border\" role=\"status\">\r\n          <span className=\"visually-hidden\">Loading...</span>\r\n        </Spinner>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container className=\"my-5\">\r\n        <Alert variant=\"danger\">{error}</Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"my-4\">\r\n      <Row>\r\n        <Col>\r\n          <h2 className=\"mb-4\">Order History</h2>\r\n        </Col>\r\n      </Row>\r\n\r\n      {orders.length === 0 ? (\r\n        <Row>\r\n          <Col className=\"text-center\">\r\n            <h4>No orders found</h4>\r\n            <p>You haven't placed any orders yet.</p>\r\n          </Col>\r\n        </Row>\r\n      ) : (\r\n        <Row>\r\n          {orders.map(order => (\r\n            <Col key={order.id} className=\"mb-4\">\r\n              <Card>\r\n                <Card.Header>\r\n                  <Row>\r\n                    <Col md={6}>\r\n                      <h5 className=\"mb-0\">Order #{order.id}</h5>\r\n                      <small className=\"text-muted\">\r\n                        Placed on {formatDate(order.orderDate)}\r\n                      </small>\r\n                    </Col>\r\n                    <Col md={6} className=\"text-md-end\">\r\n                      <Badge bg={getStatusVariant(order.status)} className=\"me-2\">\r\n                        {order.status}\r\n                      </Badge>\r\n                      <strong>${order.totalAmount}</strong>\r\n                    </Col>\r\n                  </Row>\r\n                </Card.Header>\r\n                <Card.Body>\r\n                  {order.orderItems && order.orderItems.length > 0 ? (\r\n                    <Table responsive size=\"sm\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Product</th>\r\n                          <th>Price</th>\r\n                          <th>Quantity</th>\r\n                          <th>Total</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {order.orderItems.map(item => (\r\n                          <tr key={item.id}>\r\n                            <td>{item.product?.name || 'Product'}</td>\r\n                            <td>${item.price}</td>\r\n                            <td>{item.quantity}</td>\r\n                            <td>${(item.price * item.quantity).toFixed(2)}</td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </Table>\r\n                  ) : (\r\n                    <p className=\"text-muted\">Order items not available</p>\r\n                  )}\r\n                  \r\n                  {order.shippingAddress && (\r\n                    <div className=\"mt-3\">\r\n                      <strong>Shipping Address:</strong>\r\n                      <p className=\"mb-0\">{order.shippingAddress}</p>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {order.paymentMethod && (\r\n                    <div className=\"mt-2\">\r\n                      <strong>Payment Method:</strong> {order.paymentMethod}\r\n                    </div>\r\n                  )}\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          ))}\r\n        </Row>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default OrderHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}