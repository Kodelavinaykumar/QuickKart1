{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{Container,Row,Col,Card,Button,Badge,Spinner,Alert,Form}from'react-bootstrap';import{useCart}from'../context/CartContext';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetail=()=>{const{id}=useParams();const navigate=useNavigate();const[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[quantity,setQuantity]=useState(1);const{addToCart}=useCart();useEffect(()=>{fetchProduct();},[id]);const fetchProduct=async()=>{try{setLoading(true);const response=await axios.get(\"/api/products/\".concat(id));setProduct(response.data);setError('');}catch(error){console.error('Error fetching product:',error);setError('Product not found');}finally{setLoading(false);}};const handleAddToCart=()=>{for(let i=0;i<quantity;i++){addToCart(product);}// You could add a success message here\n};const handleQuantityChange=e=>{const value=parseInt(e.target.value);if(value>0&&value<=product.stockQuantity){setQuantity(value);}};if(loading){return/*#__PURE__*/_jsx(Container,{className:\"text-center my-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}if(error||!product){return/*#__PURE__*/_jsxs(Container,{className:\"my-5\",children:[/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error||'Product not found'}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>navigate('/products'),children:\"Back to Products\"})]});}return/*#__PURE__*/_jsx(Container,{className:\"my-4\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:product.imageUrl||'https://via.placeholder.com/500x400?text=Product+Image',style:{height:'400px',objectFit:'cover'}})})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsx(\"h1\",{children:product.name}),product.brand&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-2\",children:[\"Brand: \",product.brand]}),product.category&&/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",className:\"mb-3\",children:product.category}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-primary mb-3\",children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Stock Available: \"}),/*#__PURE__*/_jsxs(\"span\",{className:product.stockQuantity>0?'text-success':'text-danger',children:[product.stockQuantity,\" units\"]})]}),product.stockQuantity>0&&/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Quantity\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",min:\"1\",max:product.stockQuantity,value:quantity,onChange:handleQuantityChange})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2 d-md-flex\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"lg\",onClick:handleAddToCart,disabled:product.stockQuantity===0,className:\"me-md-2\",children:product.stockQuantity===0?'Out of Stock':'Add to Cart'}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"lg\",onClick:()=>navigate('/products'),children:\"Back to Products\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Product Information\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Product ID:\"}),\" \",product.id]}),product.category&&/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",product.category]}),product.brand&&/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Brand:\"}),\" \",product.brand]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" $\",product.price]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Availability:\"}),\" \",product.stockQuantity>0?'In Stock':'Out of Stock']})]})]})]})})]})});};export default ProductDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Row","Col","Card","Button","Badge","Spinner","Alert","Form","useCart","axios","jsx","_jsx","jsxs","_jsxs","ProductDetail","id","navigate","product","setProduct","loading","setLoading","error","setError","quantity","setQuantity","addToCart","fetchProduct","response","get","concat","data","console","handleAddToCart","i","handleQuantityChange","e","value","parseInt","target","stockQuantity","className","children","animation","role","variant","onClick","md","Img","src","imageUrl","style","height","objectFit","name","brand","category","bg","price","description","Group","Label","Control","type","min","max","onChange","size","disabled"],"sources":["E:/sinx/QuickKart1/frontend/src/components/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Container, Row, Col, Card, Button, Badge, Spinner, Alert, Form } from 'react-bootstrap';\r\nimport { useCart } from '../context/CartContext';\r\nimport axios from 'axios';\r\n\r\nconst ProductDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [quantity, setQuantity] = useState(1);\r\n  const { addToCart } = useCart();\r\n\r\n  useEffect(() => {\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const fetchProduct = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`/api/products/${id}`);\r\n      setProduct(response.data);\r\n      setError('');\r\n    } catch (error) {\r\n      console.error('Error fetching product:', error);\r\n      setError('Product not found');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddToCart = () => {\r\n    for (let i = 0; i < quantity; i++) {\r\n      addToCart(product);\r\n    }\r\n    // You could add a success message here\r\n  };\r\n\r\n  const handleQuantityChange = (e) => {\r\n    const value = parseInt(e.target.value);\r\n    if (value > 0 && value <= product.stockQuantity) {\r\n      setQuantity(value);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container className=\"text-center my-5\">\r\n        <Spinner animation=\"border\" role=\"status\">\r\n          <span className=\"visually-hidden\">Loading...</span>\r\n        </Spinner>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error || !product) {\r\n    return (\r\n      <Container className=\"my-5\">\r\n        <Alert variant=\"danger\">\r\n          {error || 'Product not found'}\r\n        </Alert>\r\n        <Button variant=\"primary\" onClick={() => navigate('/products')}>\r\n          Back to Products\r\n        </Button>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"my-4\">\r\n      <Row>\r\n        <Col md={6}>\r\n          <Card>\r\n            <Card.Img \r\n              variant=\"top\" \r\n              src={product.imageUrl || 'https://via.placeholder.com/500x400?text=Product+Image'} \r\n              style={{ height: '400px', objectFit: 'cover' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col md={6}>\r\n          <div className=\"product-details\">\r\n            <h1>{product.name}</h1>\r\n            \r\n            {product.brand && (\r\n              <p className=\"text-muted mb-2\">Brand: {product.brand}</p>\r\n            )}\r\n            \r\n            {product.category && (\r\n              <Badge bg=\"secondary\" className=\"mb-3\">{product.category}</Badge>\r\n            )}\r\n            \r\n            <h2 className=\"text-primary mb-3\">${product.price}</h2>\r\n            \r\n            <p className=\"lead\">{product.description}</p>\r\n            \r\n            <div className=\"mb-3\">\r\n              <strong>Stock Available: </strong>\r\n              <span className={product.stockQuantity > 0 ? 'text-success' : 'text-danger'}>\r\n                {product.stockQuantity} units\r\n              </span>\r\n            </div>\r\n            \r\n            {product.stockQuantity > 0 && (\r\n              <Row className=\"mb-3\">\r\n                <Col md={4}>\r\n                  <Form.Group>\r\n                    <Form.Label>Quantity</Form.Label>\r\n                    <Form.Control\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      max={product.stockQuantity}\r\n                      value={quantity}\r\n                      onChange={handleQuantityChange}\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n              </Row>\r\n            )}\r\n            \r\n            <div className=\"d-grid gap-2 d-md-flex\">\r\n              <Button \r\n                variant=\"primary\" \r\n                size=\"lg\"\r\n                onClick={handleAddToCart}\r\n                disabled={product.stockQuantity === 0}\r\n                className=\"me-md-2\"\r\n              >\r\n                {product.stockQuantity === 0 ? 'Out of Stock' : 'Add to Cart'}\r\n              </Button>\r\n              <Button \r\n                variant=\"outline-secondary\" \r\n                size=\"lg\"\r\n                onClick={() => navigate('/products')}\r\n              >\r\n                Back to Products\r\n              </Button>\r\n            </div>\r\n            \r\n            <div className=\"mt-4\">\r\n              <h5>Product Information</h5>\r\n              <ul className=\"list-unstyled\">\r\n                <li><strong>Product ID:</strong> {product.id}</li>\r\n                {product.category && <li><strong>Category:</strong> {product.category}</li>}\r\n                {product.brand && <li><strong>Brand:</strong> {product.brand}</li>}\r\n                <li><strong>Price:</strong> ${product.price}</li>\r\n                <li><strong>Availability:</strong> {product.stockQuantity > 0 ? 'In Stock' : 'Out of Stock'}</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}